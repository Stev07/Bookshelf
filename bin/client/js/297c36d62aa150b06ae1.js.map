{"version":3,"sources":["webpack:////home/vlntngrgr/Bookshelf/node_modules/rc-menu/es/SubPopupMenu.js"],"names":["__webpack_require__","d","__webpack_exports__","getActiveKey","babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default","n","babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__","babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default","babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_4__","babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_4___default","react__WEBPACK_IMPORTED_MODULE_5__","react__WEBPACK_IMPORTED_MODULE_5___default","prop_types__WEBPACK_IMPORTED_MODULE_6__","prop_types__WEBPACK_IMPORTED_MODULE_6___default","mini_store__WEBPACK_IMPORTED_MODULE_7__","rc_util_es_KeyCode__WEBPACK_IMPORTED_MODULE_8__","rc_util_es_createChainedFunction__WEBPACK_IMPORTED_MODULE_9__","classnames__WEBPACK_IMPORTED_MODULE_10__","classnames__WEBPACK_IMPORTED_MODULE_10___default","_util__WEBPACK_IMPORTED_MODULE_11__","_DOMWrap__WEBPACK_IMPORTED_MODULE_12__","updateActiveKey","store","menuId","activeKey","_extends2","state","getState","setState","getEventKey","props","eventKey","originalActiveKey","children","found","Object","c","i","disabled","defaultActiveFirst","saveRef","index","this","instanceArray","indexOf","push","SubPopupMenu","_React$Component","_extends3","_this","call","_initialiseProps","prototype","componentDidMount","manualRef","shouldComponentUpdate","nextProps","visible","componentDidUpdate","prevProps","render","_this2","domProps","className","prefixCls","mode","role","id","focusable","tabIndex","onKeyDown","level","overflowedIndicator","theme","forEach","key","onClick","a","createElement","tag","hiddenClassName","Children","map","renderMenuItem","Component","propTypes","onSelect","func","onDeselect","onOpenChange","onDestroy","openTransitionName","string","openAnimation","oneOfType","object","openKeys","arrayOf","bool","any","parentMenu","shape","multiple","style","selectedKeys","defaultSelectedKeys","defaultOpenKeys","number","oneOf","triggerSubMenuAction","inlineIndent","itemIcon","node","expandIcon","defaultProps","_this3","e","callback","keyCode","handled","getFlatInstanceArray","obj","active","activeItem","UP","DOWN","step","preventDefault","onItemHover","hover","selectInfo","getOpenTransitionName","direction","len","length","concat","reverse","activeIndex","every","ci","arr","slice","start","child","renderCommonMenuItem","extraProps","childProps","isActive","newChildProps","rootPrefixCls","undefined","ref","bind","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","builtinPlacements","cloneElement","subMenuKey","connected"],"mappings":"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","file":"js/297c36d62aa150b06ae1.js","sourcesContent":["import _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _extends from 'babel-runtime/helpers/extends';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'mini-store';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport createChainedFunction from 'rc-util/es/createChainedFunction';\nimport classNames from 'classnames';\nimport { getKeyFromChildrenIndex, loopMenuItem, noop, menuAllProps, isMobileDevice } from './util';\nimport DOMWrap from './DOMWrap';\n\nfunction allDisabled(arr) {\n  if (!arr.length) {\n    return true;\n  }\n  return arr.every(function (c) {\n    return !!c.props.disabled;\n  });\n}\n\nfunction updateActiveKey(store, menuId, activeKey) {\n  var _extends2;\n\n  var state = store.getState();\n  store.setState({\n    activeKey: _extends({}, state.activeKey, (_extends2 = {}, _extends2[menuId] = activeKey, _extends2))\n  });\n}\n\nfunction getEventKey(props) {\n  // when eventKey not available ,it's menu and return menu id '0-menu-'\n  return props.eventKey || '0-menu-';\n}\n\nexport function getActiveKey(props, originalActiveKey) {\n  var activeKey = originalActiveKey;\n  var children = props.children,\n      eventKey = props.eventKey;\n\n  if (activeKey) {\n    var found = void 0;\n    loopMenuItem(children, function (c, i) {\n      if (c && !c.props.disabled && activeKey === getKeyFromChildrenIndex(c, eventKey, i)) {\n        found = true;\n      }\n    });\n    if (found) {\n      return activeKey;\n    }\n  }\n  activeKey = null;\n  if (props.defaultActiveFirst) {\n    loopMenuItem(children, function (c, i) {\n      if (!activeKey && c && !c.props.disabled) {\n        activeKey = getKeyFromChildrenIndex(c, eventKey, i);\n      }\n    });\n    return activeKey;\n  }\n  return activeKey;\n}\n\nexport function saveRef(c) {\n  if (c) {\n    var index = this.instanceArray.indexOf(c);\n    if (index !== -1) {\n      // update component if it's already inside instanceArray\n      this.instanceArray[index] = c;\n    } else {\n      // add component if it's not in instanceArray yet;\n      this.instanceArray.push(c);\n    }\n  }\n}\n\nexport var SubPopupMenu = function (_React$Component) {\n  _inherits(SubPopupMenu, _React$Component);\n\n  function SubPopupMenu(props) {\n    var _extends3;\n\n    _classCallCheck(this, SubPopupMenu);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    props.store.setState({\n      activeKey: _extends({}, props.store.getState().activeKey, (_extends3 = {}, _extends3[props.eventKey] = getActiveKey(props, props.activeKey), _extends3))\n    });\n\n    _this.instanceArray = [];\n    return _this;\n  }\n\n  SubPopupMenu.prototype.componentDidMount = function componentDidMount() {\n    // invoke customized ref to expose component to mixin\n    if (this.props.manualRef) {\n      this.props.manualRef(this);\n    }\n  };\n\n  SubPopupMenu.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    return this.props.visible || nextProps.visible;\n  };\n\n  SubPopupMenu.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var props = this.props;\n    var originalActiveKey = 'activeKey' in props ? props.activeKey : props.store.getState().activeKey[getEventKey(props)];\n    var activeKey = getActiveKey(props, originalActiveKey);\n    if (activeKey !== originalActiveKey) {\n      updateActiveKey(props.store, getEventKey(props), activeKey);\n    } else if ('activeKey' in prevProps) {\n      // If prev activeKey is not same as current activeKey,\n      // we should set it.\n      var prevActiveKey = getActiveKey(prevProps, prevProps.activeKey);\n      if (activeKey !== prevActiveKey) {\n        updateActiveKey(props.store, getEventKey(props), activeKey);\n      }\n    }\n  };\n\n  // all keyboard events callbacks run from here at first\n\n\n  SubPopupMenu.prototype.render = function render() {\n    var _this2 = this;\n\n    var props = _objectWithoutProperties(this.props, []);\n\n    this.instanceArray = [];\n    var className = classNames(props.prefixCls, props.className, props.prefixCls + '-' + props.mode);\n    var domProps = {\n      className: className,\n      // role could be 'select' and by default set to menu\n      role: props.role || 'menu'\n    };\n    if (props.id) {\n      domProps.id = props.id;\n    }\n    if (props.focusable) {\n      domProps.tabIndex = '0';\n      domProps.onKeyDown = this.onKeyDown;\n    }\n    var prefixCls = props.prefixCls,\n        eventKey = props.eventKey,\n        visible = props.visible,\n        level = props.level,\n        mode = props.mode,\n        overflowedIndicator = props.overflowedIndicator,\n        theme = props.theme;\n\n    menuAllProps.forEach(function (key) {\n      return delete props[key];\n    });\n\n    // Otherwise, the propagated click event will trigger another onClick\n    delete props.onClick;\n\n    return (\n      // ESLint is not smart enough to know that the type of `children` was checked.\n      /* eslint-disable */\n      React.createElement(\n        DOMWrap,\n        _extends({}, props, {\n          prefixCls: prefixCls,\n          mode: mode,\n          tag: 'ul',\n          level: level,\n          theme: theme,\n          hiddenClassName: prefixCls + '-hidden',\n          visible: visible,\n          overflowedIndicator: overflowedIndicator\n        }, domProps),\n        React.Children.map(props.children, function (c, i) {\n          return _this2.renderMenuItem(c, i, eventKey || '0-menu-');\n        })\n      )\n      /*eslint-enable */\n\n    );\n  };\n\n  return SubPopupMenu;\n}(React.Component);\nSubPopupMenu.propTypes = {\n  onSelect: PropTypes.func,\n  onClick: PropTypes.func,\n  onDeselect: PropTypes.func,\n  onOpenChange: PropTypes.func,\n  onDestroy: PropTypes.func,\n  openTransitionName: PropTypes.string,\n  openAnimation: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  openKeys: PropTypes.arrayOf(PropTypes.string),\n  visible: PropTypes.bool,\n  children: PropTypes.any,\n  parentMenu: PropTypes.object,\n  eventKey: PropTypes.string,\n  store: PropTypes.shape({\n    getState: PropTypes.func,\n    setState: PropTypes.func\n  }),\n\n  // adding in refactor\n  focusable: PropTypes.bool,\n  multiple: PropTypes.bool,\n  style: PropTypes.object,\n  defaultActiveFirst: PropTypes.bool,\n  activeKey: PropTypes.string,\n  selectedKeys: PropTypes.arrayOf(PropTypes.string),\n  defaultSelectedKeys: PropTypes.arrayOf(PropTypes.string),\n  defaultOpenKeys: PropTypes.arrayOf(PropTypes.string),\n  level: PropTypes.number,\n  mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\n  triggerSubMenuAction: PropTypes.oneOf(['click', 'hover']),\n  inlineIndent: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  manualRef: PropTypes.func,\n  itemIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  expandIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node])\n};\nSubPopupMenu.defaultProps = {\n  prefixCls: 'rc-menu',\n  className: '',\n  mode: 'vertical',\n  level: 1,\n  inlineIndent: 24,\n  visible: true,\n  focusable: true,\n  style: {},\n  manualRef: noop\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onKeyDown = function (e, callback) {\n    var keyCode = e.keyCode;\n    var handled = void 0;\n    _this3.getFlatInstanceArray().forEach(function (obj) {\n      if (obj && obj.props.active && obj.onKeyDown) {\n        handled = obj.onKeyDown(e);\n      }\n    });\n    if (handled) {\n      return 1;\n    }\n    var activeItem = null;\n    if (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN) {\n      activeItem = _this3.step(keyCode === KeyCode.UP ? -1 : 1);\n    }\n    if (activeItem) {\n      e.preventDefault();\n      updateActiveKey(_this3.props.store, getEventKey(_this3.props), activeItem.props.eventKey);\n\n      if (typeof callback === 'function') {\n        callback(activeItem);\n      }\n\n      return 1;\n    }\n  };\n\n  this.onItemHover = function (e) {\n    var key = e.key,\n        hover = e.hover;\n\n    updateActiveKey(_this3.props.store, getEventKey(_this3.props), hover ? key : null);\n  };\n\n  this.onDeselect = function (selectInfo) {\n    _this3.props.onDeselect(selectInfo);\n  };\n\n  this.onSelect = function (selectInfo) {\n    _this3.props.onSelect(selectInfo);\n  };\n\n  this.onClick = function (e) {\n    _this3.props.onClick(e);\n  };\n\n  this.onOpenChange = function (e) {\n    _this3.props.onOpenChange(e);\n  };\n\n  this.onDestroy = function (key) {\n    /* istanbul ignore next */\n    _this3.props.onDestroy(key);\n  };\n\n  this.getFlatInstanceArray = function () {\n    return _this3.instanceArray;\n  };\n\n  this.getOpenTransitionName = function () {\n    return _this3.props.openTransitionName;\n  };\n\n  this.step = function (direction) {\n    var children = _this3.getFlatInstanceArray();\n    var activeKey = _this3.props.store.getState().activeKey[getEventKey(_this3.props)];\n    var len = children.length;\n    if (!len) {\n      return null;\n    }\n    if (direction < 0) {\n      children = children.concat().reverse();\n    }\n    // find current activeIndex\n    var activeIndex = -1;\n    children.every(function (c, ci) {\n      if (c && c.props.eventKey === activeKey) {\n        activeIndex = ci;\n        return false;\n      }\n      return true;\n    });\n    if (!_this3.props.defaultActiveFirst && activeIndex !== -1 && allDisabled(children.slice(activeIndex, len - 1))) {\n      return undefined;\n    }\n    var start = (activeIndex + 1) % len;\n    var i = start;\n\n    do {\n      var child = children[i];\n      if (!child || child.props.disabled) {\n        i = (i + 1) % len;\n      } else {\n        return child;\n      }\n    } while (i !== start);\n\n    return null;\n  };\n\n  this.renderCommonMenuItem = function (child, i, extraProps) {\n    var state = _this3.props.store.getState();\n    var props = _this3.props;\n    var key = getKeyFromChildrenIndex(child, props.eventKey, i);\n    var childProps = child.props;\n    var isActive = key === state.activeKey;\n    var newChildProps = _extends({\n      mode: childProps.mode || props.mode,\n      level: props.level,\n      inlineIndent: props.inlineIndent,\n      renderMenuItem: _this3.renderMenuItem,\n      rootPrefixCls: props.prefixCls,\n      index: i,\n      parentMenu: props.parentMenu,\n      // customized ref function, need to be invoked manually in child's componentDidMount\n      manualRef: childProps.disabled ? undefined : createChainedFunction(child.ref, saveRef.bind(_this3)),\n      eventKey: key,\n      active: !childProps.disabled && isActive,\n      multiple: props.multiple,\n      onClick: function onClick(e) {\n        (childProps.onClick || noop)(e);\n        _this3.onClick(e);\n      },\n      onItemHover: _this3.onItemHover,\n      openTransitionName: _this3.getOpenTransitionName(),\n      openAnimation: props.openAnimation,\n      subMenuOpenDelay: props.subMenuOpenDelay,\n      subMenuCloseDelay: props.subMenuCloseDelay,\n      forceSubMenuRender: props.forceSubMenuRender,\n      onOpenChange: _this3.onOpenChange,\n      onDeselect: _this3.onDeselect,\n      onSelect: _this3.onSelect,\n      builtinPlacements: props.builtinPlacements,\n      itemIcon: childProps.itemIcon || _this3.props.itemIcon,\n      expandIcon: childProps.expandIcon || _this3.props.expandIcon\n    }, extraProps);\n    // ref: https://github.com/ant-design/ant-design/issues/13943\n    if (props.mode === 'inline' || isMobileDevice()) {\n      newChildProps.triggerSubMenuAction = 'click';\n    }\n    return React.cloneElement(child, newChildProps);\n  };\n\n  this.renderMenuItem = function (c, i, subMenuKey) {\n    /* istanbul ignore if */\n    if (!c) {\n      return null;\n    }\n    var state = _this3.props.store.getState();\n    var extraProps = {\n      openKeys: state.openKeys,\n      selectedKeys: state.selectedKeys,\n      triggerSubMenuAction: _this3.props.triggerSubMenuAction,\n      subMenuKey: subMenuKey\n    };\n    return _this3.renderCommonMenuItem(c, i, extraProps);\n  };\n};\n\nvar connected = connect()(SubPopupMenu);\n\nexport default connected;"],"sourceRoot":""}