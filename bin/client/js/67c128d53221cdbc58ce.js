(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{54:function(e,o,t){"use strict";var n=t(2),i=t.n(n),s=t(7),p=t.n(s),u=t(3),a=t.n(u),r=t(8),l=t.n(r),c=t(0),h=t.n(c),d=t(1),m=t.n(d),f=t(5),T=t(44),g=t(31),C=t(79),b=t(80),v=t(4),M=t.n(v),y=t(58),P=t(179);function D(){}var w=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"],O=!!f.createPortal,x={rcTrigger:m.a.shape({onPopupMouseDown:m.a.func})},k=function(e){function o(t){p()(this,o);var n=a()(this,e.call(this,t));V.call(n);var i=void 0;return i="popupVisible"in t?!!t.popupVisible:!!t.defaultPopupVisible,n.prevPopupVisible=i,n.state={popupVisible:i},n}return l()(o,e),o.prototype.getChildContext=function(){return{rcTrigger:{onPopupMouseDown:this.onPopupMouseDown}}},o.prototype.componentWillMount=function(){var e=this;w.forEach(function(o){e["fire"+o]=function(t){e.fireEvents(o,t)}})},o.prototype.componentDidMount=function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})},o.prototype.componentWillReceiveProps=function(e){var o=e.popupVisible;void 0!==o&&this.setState({popupVisible:o})},o.prototype.componentDidUpdate=function(e,o){var t=this.props,n=this.state;if(O||this.renderComponent(null,function(){o.popupVisible!==n.popupVisible&&t.afterPopupVisibleChange(n.popupVisible)}),this.prevPopupVisible=o.popupVisible,n.popupVisible){var i=void 0;return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(i=t.getDocument(),this.clickOutsideHandler=Object(g.a)(i,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(i=i||t.getDocument(),this.touchOutsideHandler=Object(g.a)(i,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(i=i||t.getDocument(),this.contextMenuOutsideHandler1=Object(g.a)(i,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Object(g.a)(window,"blur",this.onContextMenuClose)))}this.clearOutsideHandler()},o.prototype.componentWillUnmount=function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout)},o.prototype.getPopupDomNode=function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null},o.prototype.getPopupAlign=function(){var e=this.props,o=e.popupPlacement,t=e.popupAlign,n=e.builtinPlacements;return o&&n?Object(y.a)(n,o,t):t},o.prototype.setPopupVisible=function(e,o){var t=this.props.alignPoint;this.clearDelayTimer(),this.state.popupVisible!==e&&("popupVisible"in this.props||this.setState({popupVisible:e}),this.props.onPopupVisibleChange(e)),t&&o&&this.setPoint(o)},o.prototype.delaySetPopupVisible=function(e,o,t){var n=this,i=1e3*o;if(this.clearDelayTimer(),i){var s=t?{pageX:t.pageX,pageY:t.pageY}:null;this.delayTimer=setTimeout(function(){n.setPopupVisible(e,s),n.clearDelayTimer()},i)}else this.setPopupVisible(e,t)},o.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},o.prototype.clearOutsideHandler=function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},o.prototype.createTwoChains=function(e){var o=this.props.children.props,t=this.props;return o[e]&&t[e]?this["fire"+e]:o[e]||t[e]},o.prototype.isClickToShow=function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("click")||-1!==t.indexOf("click")},o.prototype.isContextMenuToShow=function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("contextMenu")||-1!==t.indexOf("contextMenu")},o.prototype.isClickToHide=function(){var e=this.props,o=e.action,t=e.hideAction;return-1!==o.indexOf("click")||-1!==t.indexOf("click")},o.prototype.isMouseEnterToShow=function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("hover")||-1!==t.indexOf("mouseEnter")},o.prototype.isMouseLeaveToHide=function(){var e=this.props,o=e.action,t=e.hideAction;return-1!==o.indexOf("hover")||-1!==t.indexOf("mouseLeave")},o.prototype.isFocusToShow=function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("focus")||-1!==t.indexOf("focus")},o.prototype.isBlurToHide=function(){var e=this.props,o=e.action,t=e.hideAction;return-1!==o.indexOf("focus")||-1!==t.indexOf("blur")},o.prototype.forcePopupAlign=function(){this.state.popupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()},o.prototype.fireEvents=function(e,o){var t=this.props.children.props[e];t&&t(o);var n=this.props[e];n&&n(o)},o.prototype.close=function(){this.setPopupVisible(!1)},o.prototype.render=function(){var e=this,o=this.state.popupVisible,t=this.props,n=t.children,i=t.forceRender,s=t.alignPoint,p=t.className,u=h.a.Children.only(n),a={key:"trigger"};this.isContextMenuToShow()?a.onContextMenu=this.onContextMenu:a.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(a.onClick=this.onClick,a.onMouseDown=this.onMouseDown,a.onTouchStart=this.onTouchStart):(a.onClick=this.createTwoChains("onClick"),a.onMouseDown=this.createTwoChains("onMouseDown"),a.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(a.onMouseEnter=this.onMouseEnter,s&&(a.onMouseMove=this.onMouseMove)):a.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?a.onMouseLeave=this.onMouseLeave:a.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(a.onFocus=this.onFocus,a.onBlur=this.onBlur):(a.onFocus=this.createTwoChains("onFocus"),a.onBlur=this.createTwoChains("onBlur"));var r=M()(u&&u.props&&u.props.className,p);r&&(a.className=r);var l=h.a.cloneElement(u,a);if(!O)return h.a.createElement(C.a,{parent:this,visible:o,autoMount:!1,forceRender:i,getComponent:this.getComponent,getContainer:this.getContainer},function(o){var t=o.renderComponent;return e.renderComponent=t,l});var c=void 0;return(o||this._component||i)&&(c=h.a.createElement(b.a,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),[l,c]},o}(h.a.Component);k.propTypes={children:m.a.any,action:m.a.oneOfType([m.a.string,m.a.arrayOf(m.a.string)]),showAction:m.a.any,hideAction:m.a.any,getPopupClassNameFromAlign:m.a.any,onPopupVisibleChange:m.a.func,afterPopupVisibleChange:m.a.func,popup:m.a.oneOfType([m.a.node,m.a.func]).isRequired,popupStyle:m.a.object,prefixCls:m.a.string,popupClassName:m.a.string,className:m.a.string,popupPlacement:m.a.string,builtinPlacements:m.a.object,popupTransitionName:m.a.oneOfType([m.a.string,m.a.object]),popupAnimation:m.a.any,mouseEnterDelay:m.a.number,mouseLeaveDelay:m.a.number,zIndex:m.a.number,focusDelay:m.a.number,blurDelay:m.a.number,getPopupContainer:m.a.func,getDocument:m.a.func,forceRender:m.a.bool,destroyPopupOnHide:m.a.bool,mask:m.a.bool,maskClosable:m.a.bool,onPopupAlign:m.a.func,popupAlign:m.a.object,popupVisible:m.a.bool,defaultPopupVisible:m.a.bool,maskTransitionName:m.a.oneOfType([m.a.string,m.a.object]),maskAnimation:m.a.string,stretch:m.a.string,alignPoint:m.a.bool},k.contextTypes=x,k.childContextTypes=x,k.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(){return window.document},onPopupVisibleChange:D,afterPopupVisibleChange:D,onPopupAlign:D,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]};var V=function(){var e=this;this.onMouseEnter=function(o){var t=e.props.mouseEnterDelay;e.fireEvents("onMouseEnter",o),e.delaySetPopupVisible(!0,t,t?null:o)},this.onMouseMove=function(o){e.fireEvents("onMouseMove",o),e.setPoint(o)},this.onMouseLeave=function(o){e.fireEvents("onMouseLeave",o),e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)},this.onPopupMouseEnter=function(){e.clearDelayTimer()},this.onPopupMouseLeave=function(o){o.relatedTarget&&!o.relatedTarget.setTimeout&&e._component&&e._component.getPopupDomNode&&Object(T.a)(e._component.getPopupDomNode(),o.relatedTarget)||e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)},this.onFocus=function(o){e.fireEvents("onFocus",o),e.clearDelayTimer(),e.isFocusToShow()&&(e.focusTime=Date.now(),e.delaySetPopupVisible(!0,e.props.focusDelay))},this.onMouseDown=function(o){e.fireEvents("onMouseDown",o),e.preClickTime=Date.now()},this.onTouchStart=function(o){e.fireEvents("onTouchStart",o),e.preTouchTime=Date.now()},this.onBlur=function(o){e.fireEvents("onBlur",o),e.clearDelayTimer(),e.isBlurToHide()&&e.delaySetPopupVisible(!1,e.props.blurDelay)},this.onContextMenu=function(o){o.preventDefault(),e.fireEvents("onContextMenu",o),e.setPopupVisible(!0,o)},this.onContextMenuClose=function(){e.isContextMenuToShow()&&e.close()},this.onClick=function(o){if(e.fireEvents("onClick",o),e.focusTime){var t=void 0;if(e.preClickTime&&e.preTouchTime?t=Math.min(e.preClickTime,e.preTouchTime):e.preClickTime?t=e.preClickTime:e.preTouchTime&&(t=e.preTouchTime),Math.abs(t-e.focusTime)<20)return;e.focusTime=0}e.preClickTime=0,e.preTouchTime=0,o&&o.preventDefault&&o.preventDefault();var n=!e.state.popupVisible;(e.isClickToHide()&&!n||n&&e.isClickToShow())&&e.setPopupVisible(!e.state.popupVisible,o)},this.onPopupMouseDown=function(){var o=e.context.rcTrigger,t=void 0===o?{}:o;e.hasPopupMouseDown=!0,clearTimeout(e.mouseDownTimeout),e.mouseDownTimeout=setTimeout(function(){e.hasPopupMouseDown=!1},0),t.onPopupMouseDown&&t.onPopupMouseDown.apply(t,arguments)},this.onDocumentClick=function(o){if(!e.props.mask||e.props.maskClosable){var t=o.target,n=Object(f.findDOMNode)(e);Object(T.a)(n,t)||e.hasPopupMouseDown||e.close()}},this.getRootDomNode=function(){return Object(f.findDOMNode)(e)},this.getPopupClassNameFromAlign=function(o){var t=[],n=e.props,i=n.popupPlacement,s=n.builtinPlacements,p=n.prefixCls,u=n.alignPoint,a=n.getPopupClassNameFromAlign;return i&&s&&t.push(Object(y.b)(s,p,o,u)),a&&t.push(a(o)),t.join(" ")},this.getComponent=function(){var o=e.props,t=o.prefixCls,n=o.destroyPopupOnHide,s=o.popupClassName,p=o.action,u=o.onPopupAlign,a=o.popupAnimation,r=o.popupTransitionName,l=o.popupStyle,c=o.mask,d=o.maskAnimation,m=o.maskTransitionName,f=o.zIndex,T=o.popup,g=o.stretch,C=o.alignPoint,b=e.state,v=b.popupVisible,M=b.point,y=e.getPopupAlign(),D={};return e.isMouseEnterToShow()&&(D.onMouseEnter=e.onPopupMouseEnter),e.isMouseLeaveToHide()&&(D.onMouseLeave=e.onPopupMouseLeave),D.onMouseDown=e.onPopupMouseDown,D.onTouchStart=e.onPopupMouseDown,h.a.createElement(P.a,i()({prefixCls:t,destroyPopupOnHide:n,visible:v,point:C&&M,className:s,action:p,align:y,onAlign:u,animation:a,getClassNameFromAlign:e.getPopupClassNameFromAlign},D,{stretch:g,getRootDomNode:e.getRootDomNode,style:l,mask:c,zIndex:f,transitionName:r,maskAnimation:d,maskTransitionName:m,ref:e.savePopup}),"function"==typeof T?T():T)},this.getContainer=function(){var o=e.props,t=document.createElement("div");return t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",(o.getPopupContainer?o.getPopupContainer(Object(f.findDOMNode)(e)):o.getDocument().body).appendChild(t),t},this.setPoint=function(o){e.props.alignPoint&&o&&e.setState({point:{pageX:o.pageX,pageY:o.pageY}})},this.handlePortalUpdate=function(){e.prevPopupVisible!==e.state.popupVisible&&e.props.afterPopupVisibleChange(e.state.popupVisible)},this.savePopup=function(o){e._component=o}};o.a=k}}]);